{% extends 'layout/base.html' %} 
{% block title %}Catégories{% endblock %}
{%block main_content %}
<div class="container mx-auto p-4">
        <div class="flex justify-between mb-4">
            <input type="text" placeholder="Rechercher par nom" class="border p-2 rounded" id="search">
            <button id="addCategoryBtn" class="bg-blue-500 text-white p-2 rounded">Ajouter une Catégorie</button>
        </div>

        <table class="min-w-full border">
            <thead>
                <tr>
                    <th class="border">ID</th>
                    <th class="border">Nom</th>
                    <th class="border">Description</th>
                </tr>
            </thead>
            <tbody>
                {% for category in categories %}
                <tr>
                    <td class="border">{{ category.id_Categorie }}</td>
                    <td class="border">{{ category.nom_Categorie }}</td>
                    <td class="border">{{ category.description }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Modal pour ajouter une catégorie -->
        <div id="addCategoryModal" class="hidden fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center">
            <div class="bg-white p-4 rounded">
                <h2 class="text-lg font-bold">Ajouter une Catégorie</h2>
                <form method="post">
                    {% csrf_token %}
                    {{ form.as_p }}
                    <button type="submit" class="bg-blue-500 text-white p-2 rounded">Ajouter</button>
                    <button type="button" id="closeModal" class="bg-gray-300 p-2 rounded">Annuler</button>
                </form>
            </div>
        </div>

        <script>
            document.getElementById('addCategoryBtn').onclick = function() {
                document.getElementById('addCategoryModal').classList.remove('hidden');
            };

            document.getElementById('closeModal').onclick = function() {
                document.getElementById('addCategoryModal').classList.add('hidden');
            };
        </script>
    </div>
{% endblock %}
